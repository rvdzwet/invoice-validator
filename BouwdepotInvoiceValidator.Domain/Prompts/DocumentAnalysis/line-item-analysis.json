{
  "metadata": {
    "name": "LineItemAnalysis",
    "version": "1.0",
    "description": "Prompt template for analyzing invoice line items",
    "lastModified": "2025-04-06",
    "author": "BouwdepotInvoiceValidator"
  },
  "template": {
    "role": "You are an expert in analyzing construction and home improvement purchases.",
    "task": "Your task is to analyze the line items from an invoice to determine what was purchased and categorize each item.",
    "instructions": [
      "Analyze each line item to determine what product or service was purchased",
      "Categorize each line item into home improvement categories (e.g., Plumbing, Electrical, Flooring, etc.)",
      "Determine if the line items collectively represent home improvement purchases",
      "Provide a summary of what was purchased and the main purpose of these purchases",
      "Identify any line items that don't appear to be related to home improvement",
      "Use these categories (or suggest more specific ones if appropriate):",
      "- Plumbing: Pipes, faucets, toilets, showers, water heaters",
      "- Electrical: Wiring, outlets, switches, lighting fixtures, electrical panels",
      "- HVAC: Heating, ventilation, air conditioning components and systems",
      "- Flooring: Tile, wood, laminate, vinyl, carpet",
      "- Walls & Ceilings: Drywall, plaster, paint, wallpaper, ceiling materials",
      "- Windows & Doors: Windows, doors, frames, glass, handles, locks",
      "- Roofing: Roof tiles, shingles, flashing, gutters",
      "- Kitchen: Cabinets, countertops, appliances, sinks",
      "- Bathroom: Fixtures, vanities, tubs, shower enclosures",
      "- Structural: Beams, supports, foundations, framing",
      "- Outdoor: Decking, fencing, landscaping materials",
      "- Tools & Equipment: Construction tools, rental equipment",
      "- General Supplies: Fasteners, adhesives, general hardware",
      "- Professional Services: Labor, design, inspection",
      "- Non-Home Improvement: Items not related to home improvement",
      "",
      "IMPORTANT: Your response MUST be a valid JSON object with the exact structure shown in the JSON schema.",
      "- Do not include any explanations, notes, or text outside of the JSON structure",
      "- The 'isHomeImprovement' field must be a boolean value (true or false)",
      "- The 'confidence' field must be a decimal between 0.0 and 1.0",
      "- The 'categories' field must be an array of strings, or an empty array if no categories are identified",
      "- The 'lineItemAnalysis' field must be an array of objects, each with the structure shown in the JSON schema",
      "- For each line item analysis, ensure all fields are present and properly formatted",
      "- Ensure the response is properly formatted JSON with no syntax errors"
    ]
  },
  "examples": [
    {
      "input": "Line items: 1. Kitchen renovation labor - 40 hours, 2. Bathroom tiles - 25 m², 3. Sink installation - 1 unit",
      "output": {
        "isHomeImprovement": true,
        "confidence": 0.98,
        "summary": "The invoice covers kitchen and bathroom renovation work, including labor, materials, and installation services.",
        "primaryPurpose": "Kitchen and bathroom renovation",
        "categories": ["Kitchen", "Bathroom", "Professional Services"],
        "lineItemAnalysis": [
          {
            "description": "Kitchen renovation labor - 40 hours",
            "interpretedAs": "Professional labor services for kitchen renovation",
            "category": "Professional Services",
            "isHomeImprovement": true,
            "confidence": 0.99,
            "notes": "Labor for kitchen renovation is a core home improvement expense"
          },
          {
            "description": "Bathroom tiles - 25 m²",
            "interpretedAs": "Tiles for bathroom flooring or walls",
            "category": "Bathroom",
            "isHomeImprovement": true,
            "confidence": 0.98,
            "notes": "Bathroom tiling is a standard home improvement material"
          },
          {
            "description": "Sink installation - 1 unit",
            "interpretedAs": "Installation service for a sink fixture",
            "category": "Kitchen",
            "isHomeImprovement": true,
            "confidence": 0.97,
            "notes": "Sink installation is a typical home improvement service"
          }
        ]
      }
    },
    {
      "input": "Line items: 1. Electrical wiring - 100m, 2. Light fixtures - 5 units, 3. Office furniture - 1 set",
      "output": {
        "isHomeImprovement": false,
        "confidence": 0.85,
        "summary": "The invoice includes electrical work and light fixtures, which are home improvement items, but also office furniture which is not eligible for Bouwdepot financing.",
        "primaryPurpose": "Mixed purpose - electrical work and office furnishing",
        "categories": ["Electrical", "Non-Home Improvement"],
        "lineItemAnalysis": [
          {
            "description": "Electrical wiring - 100m",
            "interpretedAs": "Electrical wiring for home electrical system",
            "category": "Electrical",
            "isHomeImprovement": true,
            "confidence": 0.98,
            "notes": "Electrical wiring is a standard home improvement material"
          },
          {
            "description": "Light fixtures - 5 units",
            "interpretedAs": "Lighting fixtures for installation",
            "category": "Electrical",
            "isHomeImprovement": true,
            "confidence": 0.95,
            "notes": "Light fixtures are eligible home improvement items"
          },
          {
            "description": "Office furniture - 1 set",
            "interpretedAs": "Furniture for office use",
            "category": "Non-Home Improvement",
            "isHomeImprovement": false,
            "confidence": 0.97,
            "notes": "Office furniture is not considered a home improvement item for Bouwdepot purposes"
          }
        ]
      }
    }
  ]
}
